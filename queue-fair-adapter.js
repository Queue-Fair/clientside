function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function defineQueueFair(){window.QueueFair=function(){"use strict";return _createClass((function e(){_classCallCheck(this,e),_defineProperty(this,"s",
"?gly#lg@%ti{|wkv6;<7:%#vw|ohĊdoo=ćqlwlĠ#$lpsruwdqw>#ĮvĦlrqģil{hgĪĬĮİĲĴ#erwwrpģ8s{ŃĭįıĳĵĝiwŐŒŔŅŗň}0lqgh{ģ54Ė7;69ĖşŖŇĵŊuŧu0udĄxvģ7ŞīŕņŘŉįŹģ&Fƍ#4ŞvroĈųƆňsŽĄqjģ3ƃńŴƇedfnjurxŦģzkĦhƖšŶr{0vkŽrzģujƤ+83/#ǂǄǆ#317,ǉŞőœ4ǐǎœƄŠŵĶrťwhźhyhĳƀ#qĻƱǖƢňrƙfĦ|ƞƲŇ%A?dęěĝğġģťĹĩǨƗĵĄvsodǯĤƔqh0iĝǕơȁ#ĠljqŤǜpǣfǡǜuǱƇfxuƒuģĮǛǝȠƘǚĳǝ0ǟȝǣťkǝĦȫĘkuhiĊkŌsƀ22txhɆȍdlu1fŎ2yɋwxĠ0zɊħƜŻrŎĘıƾhwĊbeȆqnǳ?vyj#zĈĐĊ55<ǋ9ŒȹhȕȿĊ45618;ɸ#ɑhzEƵĊ3ǉ#ɳɵ79Əɿʁ;ĘǠȤĺqɽ14Ę{poqvȾɀ=Ƀzʩ1zʀįj253ʲ2ɫjʟʡʣ=ʵʥwsʧ2ʩzʫʭƾʰʲ3ʴɬĘĚĜĞ%ĠĢĤǾoȫĵɯgĐŐƟȐƅƳ#ȵɻŜ#6˛˕ĶƚťƝǔǅƠ˝ǘȢȤįǼqȵuȷȀ˞ȨȮǞǠǢ˳˵˷ȑšĘA#ăȼv̅?fƔsSdĐ#̌l̎̐kXĥwʤ%ſǝVǬhRqXvhĘĈĊČfs8:<3ǳ̆ƙ̑ĉ%pʎ4Ǌ8/ů1:ʒfʎɵ3̻0ʀ36ǅ;̾:/716:#;51;;/ʱ͖≮ʝ͘Ŭ͐8ˣ:̾6/68͐5#ʑ199/8ɵ64#91<5/4͋7͉ɵ5̻ēʁͶ͖͘ʂ137#0͕:7͙ʀ5ʒ0ɾ͐͘7ͩ8͢΍ͤ5͘9ʀ9͵Εͤ͘ū̾΋0;Ή͍͑ʝΔ:ǊΣ͎͕;Δ͚9̻͏6͜Ϋ͕Űͧ͐Δ9͕8ͦ΍͸Ό͚Ŭ/0ͷɳΌ΃ͰΥͮ͒0χʝͅ6͕͹ΌǒΰώϠ:ϗΓΉͺ͆ͩΔʹΉ͘Ϙͷ;ϗϪώʔ8Τ͏4͍Ϋ͋Ρͬ15ΐ0:4͓͐ϿЁɳǋ;ʎʀͼώ7π͉Аσώ8ͷűƏΦ<Ϣʀ΋ν͐Л΍Є͔ͶЄΡϴ͏3Ћ}ĘľġĊ&iвгˋǸˎȃȅȇ=ǥȋ>ĚƩnȌ˗˙ʞ#2̳̊kǷˍĊпrсɖɰk=х̌dv̛Įzǝ̓sĘ̵PˣɵΏ͙ͩŮ#Kͬ4Є6΋Yˣ;ͩ:ЋѩПΏ#]#ѡū̺̼ʀ̿̒ϋ͕Ѐ͙ϿΔάѤ̹ͮЋϏЦͦЀϭϟɵЎ͠ʹϒϸͺѭΰΌГρЖͮΪͽ4͙͕9ϗɵ;ΐĖ̾ξ͏҄ЃЅͩ3ͰΨ5͒Ϡ͹͎Є͵ϬЪͱϰҷ͏Λͻͩ΁ˣ͇ңϦ͒ϙǒͧϝͫό͍ϐʒ7У͘Ξ͜υʁҏϊҶʁЁѲǅζңТʝͫβͮӤГηƏ͏СͼΉʒҐ8Ё7ǊͨʎΞϮΡөʎ͐Ϻ4ɵӴǉΉЁПΣΌϰϮΈΊ#FӇһң4П<͒ʹӂͰѫ͜ɴʀēͻΊͮ͢Γ΀͍͗ʝ͉ɿԂ̻;Ǌ:ԨҊԫѿʒ]Ęч̆2ѝ̏Đ̊Թ̖̒̍Ժ̛̗̙̝u̟ƥ̵̡̧̣̥̪̬̮ʖшԾ̵̷ū͏ʑͻͯӛҁͤԁϢʁʒ͠ѳ՟ӐЄգЄ3Ӂ͖ͺ͏9ЋϦϹͻͤԕʎ͋͑ͧԝ͒π͍͠<ΜϸңˤǋϟϐͦПēϟΒͺҊҳϒ͕Ίͻը҇ϐ͍φΤҕСͽ҂өϴͩŰҒ͸Сӕ͖պǋϢӀƏϪϮւ<ʒϜ͐Ԇ՗ʒЬ#Юoагдыǹ%иȆǯмhоwртђєԵՒ̑ˌּюѐуѓѕȆјĊњќ̍џĊѡѫͩ<ЛמΉ͜ѵϬԮ#ѯʹͩԓѨƏս͜ѹѻ͠՘4՚χҁΕЗͰʀΜɴ͸ΐϹʁξ֯ѭֲͧϋͮ֋ͷ϶ǅͮոǋҷɵמҺ֤ӭϿͦ͋ΛӇΉؘ̻ͤͭҶϴʁ͵Ζɾώ͋<ЋӰϔҐ;ƏօώևҌ҃ϢѦ։ʁͅΟͮξظշ͆չΌϺ҃ϗ͠ͲؠϽӥգΕέ#ִԶ?ԸՀ̖̊2ŧỉ̆ɭׄĲviįpĊٙʣȆǜ+Ϋǋؑ0͹ի:,̱?щ#ՔЌֆγ͉́׼اͻґͲʁ̼Ά͓ϳʔϤʎΚͦك͵ҫ׳ͧϪͶ͕ң9Ǌ͜׳ԅ͙պϸЛΈ6Ԩʀ<ңĔ̾ԄҾւǒΌ͋ͺڏϿͫ΍ԝ͘η҆ϟР҅ѧ͆ͪͱҜέ/ͤҀ0ԭΐ΢ͫһΐם͉ѿԫґͤթͱ͸ڿЩЛѫӝһԙΦآ֡ٹѷʀ͔ςҶϾڦӱԄԞΎΌǊ͎͗̾θʕ/ЗξێռϝθНΐ΁ۊϒҲЛ΃Ϟىվ҅̈́ϒۧЩΜЗҪ͞ۼύǊӆϘΉψЄͲؿЇد؎ڤړЂЅ׷ϿӤױ׻ҮطզΜЦԀǋΤչ܎3کϪϔЍغ؎ώ܅Ҍμΐڐکͷӕۺ׻͋էͷմϏ֏̻۱ΓΌվ֦۱ܣ֎٦ܪԧԉ͏ۘ0͋Ъܾ͇ϨҐνԎƏ͈ЊոѣЋ;Єɿͧ׿֟՚ܲɴγͣ۔ԩ͖ݣ8֋Ώ͐͵κΉԒʔ݂Ԭ֜<΢͉̹ӮЛ9ғݶҚձӌҷű͐ֆ؉աاҋ͙ͳ͵ɿٳ͉ͮԴֵlЯ%&;gfԮiеь%ٜĳ0yd˶̐ʚƷɡəjƀǥupĠ>ǠfōǞвhްлǦ>ֶ=ޔޖޘ޸ޑo0ǫƥǮє׃ׅё˘ב߆яȌȊ޴dʾexŌߋѐߎmȭ=pưuߕȌߛȞƔߠ=7ߞ0gїƹuż׀޷׎ȌߨƸrв̥Ŝ3ߦ߂ǭě߅ŤɧvfߐȌ߯޶нĚǫ0Ɏo˲&ˇˇĘѝ0щĊȣo+&Վ̭̯٬#٠ٛٝĊެׄĿ+ӷ̻ǃࠧ͡Ϣݚڬ֏٫׉̲Փࠠӭ܊ͺݴʝת́ݚЁ܅Ԩՠ݅ѫˣ͖ψǊתӞ:ࠦǅΚңǊʲӸ̽Γ݅ࡍ͢ݚͺࡌЀ֥Ж࠿ͫѿܮʝڑԧ/ǊجҎٹ7࡟δҥ͢ࡌŬڎְǉͻΎͫࡌۈԁيࡌͨڅ܂ڻڰ҃Δ܊Ӝࡇگ՞ӷر؀ࡡ࡞ۼۘ࠼ϋؗͰʌϘ՝Ϻ࡫֍݊ѲͦࡳΪڐͅ࡫ΪУϨࡌվ͉ωࡦ݅ѱۡއࡻ:کγЁ܊Δγـ٦ڠΟϨօ࡯Ε͕ࡦڠ࡬Ϣܵࢢࡷχդࡲ࠾ω֟УǃωβًЭ޿аޕޗ6ޙֻˎޝwޟޡĨħĻޥŌ˩ީٝޭޯޱȰ޳޵ׁ޾ǻ޻࣐iࣨ߀߹߄4ߦא=ࠥ6ߦߎࠀߑߓĴ߯0ߗߙߠǝߦँuߢĦߤߦ߱ߪ߬ࠄׂࣽऊٕ߳ɡࣴ߸Ǭࣰ>߽n߿ࠁƷׄߌऍ׃ࠇࠉࠋࠍʲ࠯ٮ࠱̶ʎʲϧԟͷҀٶҮЕލǅࡄتϿ͜ࢪӱ/ʐڑئԙࡌЋҚڏ͙ͷŬͬϸ͎شԓ͖Ҵے̹ؔۨЦ͵̺Ͱڞ܋٨ނͻԂࢢҐĔڊ֡ҜڛլͷϜϋ؉͟խʲΌٻԞڒنϱӛۉӸ΍ࢠώճکίӴϴ҃տғӵࡢࡾت͏ڂॵܟЕ॥ϟУ֙ӂͫϐЈըآͳ֫ҨʌŰ֤ЕϝبЄࢤ݊ͥʎ݈ͅսখئࢽ܂ִֶ࣎޼࣑ࠏ̍ࠑ̖ࠓअࠖ࠘Րٜࠛࠝޫࠠ̐˶{ࠤ͡ҶϤϤࡡৃࠥীুࠪϿůΊΐ͔έࡦ<ٍࠛٯٱŬΒڅʔЀҁѦࡋϧɾݓիࢇʲހؕৡթƏϡ࢜ފӿࡑ࡛͗ءࢇѫűڿ৉ࢇѭաۊٹݨ১η҅Ћ͙࢘ئࢿΉۈ̭ؓࡳԥयξ৿ܯࢧԓࡇ͟ۥࢧৼπਊعࢇИىࠦލ׻ΗਗΔ৛ࡑ࡬ϟۢࡃਃقএࡑ০ىԞࡻ3ڜϗНਚѭ̭کӂϮ̺۪࡞݅ا਒ࢱΜܯ܎ϱࢻ̿ϴΦ͒৩ЕѲ΋৿݊΢॔ӱͨ՟ҖࡻɴΟܢ͉ۢӤڛ͜ڼ݅Ѓ১δࡻծӾ̭ਫ਼࣋ސޒ࣪ޘޚּࣕࣗޢࣚȗߵާࣟޫ࣡޴ࣣȼi੸ठ޹੪࣑࣭߁ख߻ࣱࣽࣳࣵࣷťߏࣺߔࣽࣿťߚߜःߜआŜߥएߩޡऌࣧઘ߲ߴओ߷࣯ࣽ઄घťचࣹࠂञсठࠆsࠈƓतथध৓࠲ϹΒݯ΢΋࠹঑ਡӕʎڍ͍ਇؙЎਭ̹৷3ؤ৩Ӿѫ৬ФЍৰκݙ১Ўࡢԁ૒զ׾΄ЦЛΎ੏ૈҳۨؕࢧૈܲΖࢺ࢓ԙܵࢫϧĖࢇĔૣ֐૛ࢧυڱΤٴࢇࢁىŮ૮ࢅӶ૮۪܊ࡋϋ͇਷ݮ࢔Қʂ৥࢙͸࢛ঢ়ک࢞ࡑЖΪφࢥ૳Сԭ૫ծ՟̭ࢧЃؠࡪݮܲ܇ੋଆϔҊФਇ֧ૢࡖ૭ىϑࡻɾਾűੇ࡞ӶψۄԄ;՟תজӯऴࡩ՟Ԉন࣍ޓ࣏੫࣓Ċ੮ޠੰޤੳࣞ޶੶oޮ੸įࣤ੻ࣦ޷੾୆઀ֶં߃તઆׇઈ઎ઊࣹ=ߒઍપߍઊߘઐऄઓߡĬइગ୪ߧઙ߫кજ୵ऐટ߶कୟǯࣱङछs઩ׅબōમणȦࠌલцْjǴˉ஑ٮୈˏǻ˒ħǿ̂ǘ੮idߛoȈWdkŎǶ˸஝Ļࣖĸ}hģɾ˭ǗȡરȦ#&Gஹ˦ƤƦƨƪƬ#ߎޡ0ƨŽlȝ+ōƈŌŎ/ޔGFԮIǄƾe+̹Ԓ7Ҫ6,ǍனƇƙgƛ˪Ǔ௟ňǜ{ࣖȔȖģȜ˻˦ߎ0ˠjȿƞڟ௦ĵ˰ȥ˿ȶw˦˺ȞȰ˽̚௼˶௾௦ǳsƩǜްŁŉ|̆eȟ׌ˎː˳˓௰ઊ௲ɺ௴ˢԭȸǴe஖ఖஙĨ˔௸ֵ஫ɉ஡ȈYǝߨqநஜழࠊஶ&Hస˦௺˲Ĥ̀ఇళȬȩ˼ȲģׁఠTɆɈIɊuَeడఓжǺˑǽசధీřచ௳௵Ԅ͒న఻ஶȴ௽௿ȭఁȱ˾ఽ௽ǳIȻƱWே్2sஒdஒĄyA"
),_defineProperty(this,"p",null),_defineProperty(this,"ps",null),_defineProperty(this,"reported",0),_defineProperty(this,"isLocal",!1),_defineProperty(this,"rdebug",!1),_defineProperty(this,"useLocal",!1),_defineProperty(this,"debug",!1),_defineProperty(this,"parsing",!1),_defineProperty(this,"protocol","https"),_defineProperty(this,"started",!1),_defineProperty(this,"cookieNameBase","QueueFair-Pass-"),_defineProperty(this,"lg",(function(){})),_defineProperty(this,"redirectLoc",null),_defineProperty(this,"adapterResult",null),_defineProperty(this,"adapterQueue",null),_defineProperty(this,"settings",null),_defineProperty(this,"clientName",null),_defineProperty(this,"oldHref",document.location.href),_defineProperty(this,"passed",Array()),_defineProperty(this,"extra",null),_defineProperty(this,"scriptSrc",null),_defineProperty(this,"queueDomain",null),_defineProperty(this,"target",null),_defineProperty(this,"uid",null),_defineProperty(this,"errMode","POST"),_defineProperty(this,"isFT",!1),_defineProperty(this,"isSM",!1),_defineProperty(this,"jt",null),_defineProperty(this,"ln",""),_defineProperty(this,"v","5.2.28")}),[{key:"l",value:function(e){this.ln+=e+";",this.debug&&this.lg(e)}},{key:"log",value:function(e){this.l(e)}},{key:"reset",value:function(){var e=this;e.parsing=!1,e.passed=Array(),e.redirectLoc=null,e.adapterResult=null,e.adapterQueue=null}},{key:"hc",value:function(e){var t=0,r=e.length,i=0;if(r>0)for(;i<r;)t=(t<<5)-t+e.charCodeAt(i++)|0;return t}},{key:"de",value:function(e){if(null==e)return null;var t,r={},i=e.split(""),n=i[0],a=n,o=[n],u=256;for(e=1;e<i.length;e++)t=256>(t=i[e].charCodeAt(0))?i[e]:r[t]?r[t]:a+n,o.push(t),n=t.charAt(0),r[u]=a+n,u++,a=t;return o.join("")}},{key:"ip",value:function(e,t,r){e.style.setProperty(t,r,"important")}},{key:"sp",value:function(e){var t=this;t.ip(e,"transition","all 0.3s"),t.ip(e,"pointer-events","auto"),setTimeout((function(){t.ip(e,"opacity","1.0")}),500),setTimeout((function(){t.hp(e)}),1e4)}},{key:"hp",value:function(e){var t=this;t.ip(e,"transition","all ease-in-out 1s"),t.ip(e,"transform","translateY(200%)"),t.ip(e,"opacity","0.0"),setTimeout((function(){t.vp}),2e3)}},{key:"vp",value:function(){var e=this;e.ip(p,"transition","all 0s"),e.ip(p,"height","0"),e.ip(p,"width","0"),e.ip(p,"transform","translateX(-200px) translateY(200px)")}},{key:"rp",value:function(){try{if(!document.body)return;document.body.removeChild(this.p)}catch(e){}}},{key:"sa",value:function(e){var t;try{t=window[e];var r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}},{key:"dp",value:function(e){var t=this;if(null!==t.p){var r=!1;try{if(void 0===e.acc)return;var i=e.acc.c;t.isFT=!0;var n=Date.now()/1e3;if(n-i<1209600)return;if(void 0!==e.acc.hc&&e.acc.hc==t.hc(t.clientName))return;if(!t.sa("localStorage"))return;var a="qf83nd827";if(null===(i=localStorage.getItem(a))||n-i>18e3)return localStorage.setItem(a,n),t.sp(t.p),void(r=!0)}finally{r||setTimeout((function(){t.rp()}),3e4)}}else t.ps=e}},{key:"mp",value:function(){for(var e="",t=this,r=t.s,i=0;i<r.length;i++)e+=String.fromCharCode(r.charCodeAt(i)-3);i=(r=t.de(e)).indexOf('style="'),i+=7;var n=r.indexOf('"',i),a=r.substring(i,n),o=(i=r.indexOf(">",i)+1,n=r.lastIndexOf("<"),r.substring(i,n)),u=document.createElement("div");u.style.cssText=a,u.innerHTML=o,document.body&&(document.body.appendChild(u),t.p=u,null!==t.ps&&(t.dp(t.ps),t.ps=null))}},{key:"includes",value:function(e,t){return-1!=e.indexOf(t)}},{key:"startsWith",value:function(e,t){return 0===e.indexOf(t)}},{key:"endsWith",value:function(e,t){return-1!=e.indexOf(t)&&e.indexOf(t)==e.length-t.length}},{key:"extractClientName",value:function(){for(var e=this,t=document.getElementsByTagName("script"),r=0;r<t.length;r++){var i=t[r],n=i.dataset,a=n.queueFairClient;if(a){e.clientName=a;var o=n.queueFairDebug;e.setDebug(o);var u=n.queueFairDomain;u&&(e.queueDomain=u),e.extra=n.queueFairExtra;var s=n.queueFairTarget;s&&(e.target=s);var l=n.queueFairJoinToken;l&&(e.jt=l);var c=n.queueFairSingleMatch;e.isSM=c&&"false"!=c;var d=n.queueFairSrc;e.scriptSrc=d||i.getAttribute("src");break}}e.debug&&(e.lg=console.log.bind(window.console))}},{key:"extractClientNameFromDataLayer",value:function(){var e=this;if("undefined"!=typeof dataLayer&&dataLayer){for(var t in dataLayer){var r=dataLayer[t];if(void 0!==r.g){var i=r.g.queueFairClient;if(i){e.clientName=i;var n=r.g.queueFairDebug;e.setDebug(n);var a=r.g.queueFairDomain;a&&(e.queueDomain=a);var o=r.g.queueFairExtra;o&&(e.extra=o);var u=r.g.queueFairTarget;u&&(e.target=u);var s=r.g.queueFairSrc;s&&(e.scriptSrc=s);var l=r.g.queueFairJoinToken;l&&(e.jt=l);var c=r.g.queueFairSingleMatch;e.isSM=c&&"false"!=c;break}}}e.debug&&(e.lg=console.log.bind(window.console))}}},{key:"isMatch",value:function(e){return!!(e&&e.activation&&e.activation.rules)&&this.isMatchArray(e.activation.rules)}},{key:"isMatchArray",value:function(e){if(!e)return!1;for(var t=this,r=!0,i=!1,n=e.length,a=0;a<n;a++){var o=e[a];if(!r&&o.operator){if("And"==o.operator&&!i)return!1;if("Or"==o.operator&&i)return!0}var u=t.isRuleMatch(o);if(r)i=u,r=!1,t.l("  Rule 1: "+(u?"true":"false"));else if(t.l("  Rule "+(a+1)+": "+(u?"true":"false")),"And"==o.operator){if(!(i=i&&u))break}else if("Or"==o.operator&&(i=i||u))break}return t.l("Final result is "+(i?"true":"false")),i}},{key:"isRuleMatch",value:function(e){var t=this,r=""+window.location;if(t.l("Loc is "+r),"Domain"==e.component)r=r.replace("http://","").replace("https://","").split(/[/?#]/)[0];else if("Path"==e.component){var i=r.replace("http://","").replace("https://","").split(/[/?#]/)[0];r=r.substring(r.indexOf(i)+i.length);var n=0;t.startsWith(r,":")&&(n=r.indexOf("/"),r=-1!=n?r.substring(n):""),-1!=(n=r.indexOf("#"))&&(r=r.substring(0,n)),-1!=(n=r.indexOf("?"))&&(r=r.substring(0,n)),r||(r="/")}else if("Query"==e.component){n=r.indexOf("?");r=-1==n||"?"==r?"":r.substring(n+1)}else"Cookie"==e.component&&(r=t.getCookie(e.name));var a=e.value;!1===e.caseSensitive&&(r=r.toLowerCase(),a&&(a=a.toLowerCase())),t.l("Testing "+e.component+" "+a+" against "+r);var o=!1;if("Equal"==e.match&&r==a)o=!0;else if("Contain"==e.match&&null!==r&&t.includes(r,a))o=!0;else if("Exist"==e.match)o=null!=r&&""!==r;else if("RegExp"==e.match){null==r&&(r=""),o=new RegExp(a).test(r)}return e.negate&&(o=!o),o}},{key:"onMatch",value:function(e){var t=this;if(t.isPassed(e)){if(t.l("Already passed "+e.name+"."),"CLEAR"!=t.extra)return!0;var r=t.getCookie(t.cookieNameBase+e.name);if(t.l("Clear receieved - cookie is "+r),""===r)return!0;t.setCookie(e.name,r,20,e.cookieDomain)}return t.l("Checking at server "+e.displayName),t.consultAdapter(e),!1}},{key:"isPassed",value:function(e){var t=this;if(t.passed[e.name])return t.l("Queue "+e.name+" marked as passed already."),!0;var r=t.getCookie(t.cookieNameBase+e.name);return r&&""!==r?t.includes(r,e.name)?(t.l("Got a queueCookie for "+e.name+" "+r),!0):(t.l("Cookie value is invalid for "+e.name),!1):(t.l("No cookie found for queue "+e.name+" "+document.cookie),!1)}},{key:"setUIDFromCookie",value:function(){var e=this,t=(e.clientName,e.getCookie("QueueFair-Store-"+e.clientName));if(""!=t){var r=t.indexOf(":");if(-1==r&&(r=t.indexOf("=")),-1==r)return e.l("= not found in UID Cookie! "+t),void(e.uid=t);e.uid=t.substring(r+1),e.l("UID set to "+e.uid)}}},{key:"getCookie",value:function(e){if(this.useLocal&&(!e||!document.cookie))return this.retrieveCookie(e);try{var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")),r=t?decodeURIComponent(t[1]):"";return r||this.retrieveCookie(e)}catch(e){this.e(e)}return this.retrieveCookie(e)}},{key:"gotSettings",value:function(){var e=this;try{e.l("Got client settings."),e.checkQueryString(),e.parseSettings()}catch(t){e.l("QF Error "),e.l(t),e.e(t)}}},{key:"parseSettings",value:function(){var e=this;if(e.settings){var t=e.settings;try{e.dp(t)}catch(t){e.e(t)}void 0!==t.sm&&(e.isSM=t.sm);var r=t.queues;if(r&&r[0]){e.parsing=!0,e.l("Running through queue rules");for(var i=0;i<r.length;i++)try{var n=r[i];if(e.l("Checking "+n.displayName),e.isMatch(n)){if(e.l("Got a match "+n.displayName),e.passed[n.name]){var a="Already passed "+n.displayName+" "+e.passed[n.name];if(e.isSM){e.l(a+" - breaking");break}e.l(a+" - continuing");continue}if(!e.onMatch(n))return void e.l("Found matching unpassed queue "+n.displayName);if(e.isSM){e.l("Match found "+n.displayName+" - skipping remaining queues.");break}}else e.l("Rules did not match "+n.displayName)}catch(t){e.e(t)}e.l("Adapter finishing."),e.parsing=!1,e.complete("Completed normally")}else e.l("No queues found.")}else e.l("ERROR: Settings not set.")}},{key:"complete",value:function(e){"undefined"!=typeof qfOnJSAdapterComplete&&qfOnJSAdapterComplete(e),"Completed normally"!=e&&this.e(new Error(e),!1)}},{key:"consultAdapter",value:function(e){var t=this;t.rdebug&&t.e(new Error(t.ln),!1),t.adapterQueue=e;var r=document.createElement("script");r.onerror=function(){t.complete("Adapter Error")};var i=t.protocol+"://"+e.adapterServer+"/adapterjs/"+e.name+"?qfa="+t.clientName+(null!=t.uid?"&uid="+t.uid:"")+"&ts="+(new Date).getTime()+"&av=js"+t.v;i=t.appendExtra(e,i),t.l("Checking adapter "+i),r.src=i,document.getElementsByTagName("head")[0].appendChild(r)}},{key:"appendQueryOrAmp",value:function(e){return-1!=e.indexOf("?")?e+="&":e+="?",e}},{key:"appendVariant",value:function(e,t){var r=this;if(r.l("Looking for variant"),!e)return t;var i=r.getVariant(e);return i?(r.l("Found variant "+i),r.appendURL(t,"qfv",i)):(r.l("No Variant Found"),t)}},{key:"appendExtra",value:function(e,t){return e?this.appendURL(t,"qfx",this.extra):t}},{key:"appendURL",value:function(e,t,r){return null==r?e:(e=this.appendQueryOrAmp(e),e+=t+"="+encodeURIComponent(r))}},{key:"getVariant",value:function(e){var t=this;if(t.l("Getting variants for "+e.name),!e.activation)return null;var r=e.activation.variantRules;if(!r)return null;t.l("Got variant rules for "+e.name);for(var i=0;i<r.length;i++){var n=r[i],a=n.variant,o=n.rules,u=t.isMatchArray(o);if(t.l("Variant match "+a+" "+u),u)return a}return null}},{key:"restoreAdapterQueue",value:function(){var e=this;if(e.adapterQueue)return null;if(!e.settings)return"No adapterQueue and no settings!";if(!e.settings.queues)return"No adapterQueue and no queues!";var t=e.settings.queues;if(!e.adapterResult.queue)return"No adapaterQueue and no queue in result!";var r=e.adapterResult.queue;if(0===t.length)return"adapterQueue "+r+" not in empty settings!";for(var i=0;i<t.length;i++){var n=t[i];if(n.name===r)return e.adapterQueue=n,null}return"adapterQueue "+r+" not found."}},{key:"gotAdapter",value:function(){var e=this;try{var t=e.adapterResult;if(e.l("Got from adapter "+JSON.stringify(t)),!t)return void e.l("ERROR: onAdapter() called without result");if(t.action||e.l("ERROR: onAdapter() called without result action"),void 0!==t.uid){t.uid,t.cookieSeconds;e.setCookie("X7d3d932","u:"+t.uid,t.cookieSeconds,e.adapterQueue.cookieDomain)}if("SendToQueue"==t.action){e.l("Sending to queue server.");var r=e.restoreAdapterQueue(t),i="enabled";r?e.l("Recoverable Error - no adapterQueue for "+JSON.stringify(t)):i=e.adapterQueue.dynamicTarget;var n="",a=""+window.location;null!=this.target&&(a=this.target),"disabled"!=i&&(n+="target=",n+=encodeURIComponent(a)),null!=e.uid&&(""!=n&&(n+="&"),n+="qfuid="+e.uid);var o=t.location;if(e.queueDomain){var u=e.queueDomain;e.l("Using queueDomain "+u+" on "+o);var s=o.indexOf("//");if(-1!=s){s+=2;var l=o.indexOf(":",s),c=o.indexOf("/",s);o=-1==l?-1==c?o.substring(0,s)+u:o.substring(0,s)+u+o.substring(c):-1==c||l<c?o.substring(0,s)+u+o.substring(l):o.substring(0,s)+u+o.substring(c)}e.l("queueDomain applied "+o)}""!==n&&(o=o+"?"+n);var d=e.adapterQueue;return o=e.appendVariant(d,o),e.isFT||(o=e.appendExtra(d,o),o=e.appendURL(o,"qfjt",e.jt)),e.l("Redirecting to "+o),e.redirectLoc=o,void setTimeout(queueFair.redirect,100)}if("REFRESH"==t.action)return void e.complete("No queue or account.");if("CLEAR"==t.action)return e.l("CLEAR received for "+t.queue),e.passed[t.queue]=!0,void(e.parsing&&e.parseSettings());if(r=e.restoreAdapterQueue())throw new Error(r);d=e.adapterQueue;e.setCookie(t.queue,t.validation,60*d.passedLifetimeMinutes,d.cookieDomain),e.l("Marking "+t.queue+" as passed by adapter."),e.passed[t.queue]=!0,e.parsing&&e.parseSettings()}catch(t){e.l("QF Error "+JSON.stringify(t)),e.e(t)}}},{key:"redirect",value:function(){queueFair.l("Redirecting to "+queueFair.redirectLoc),window.location.replace(queueFair.redirectLoc)}},{key:"setCookie",value:function(e,t,r,i){var n=this,a=n.cookieNameBase+e;"X7d3d932"==e?a="QueueFair-Store-"+n.clientName:n.l("Setting cookie for "+e+" to "+t+(void 0===i?"":" on "+i));var o=new Date;o.setTime(o.getTime()+1e3*r);var u=a+"="+t;if(null==i||""===i||(u+="; domain="+i),u+="; path=/; expires="+o.toUTCString(),n.startsWith(""+document.location,"https://")&&(u+="; Secure; SameSite=None"),n.l("Setting cookie "+u),n.useLocal&&n.storeCookie(a,t,r),document.cookie=u,n.rdebug&&-1==a.indexOf("Store")){var s=n.getCookie(a);n.e(new Error(e+" C IS:"+s),!1)}}},{key:"storeCookie",value:function(e,t,r){try{if(!this.sa("localStorage"))return;localStorage.setItem(e,t),localStorage.setItem("QFEXP"+e,Date.now()+1e3*r)}catch(e){this.e(e)}}},{key:"retrieveCookie",value:function(e){try{if(!this.sa("localStorage"))return"";var t=localStorage.getItem(e);if(!t)return"";var r=localStorage.getItem("QFEXP"+e);return r?Date.now()>r?(localStorage.removeItem(e),localStorage.removeItem("EXP"+e),""):t:""}catch(e){this.e(e)}return""}},{key:"loadSettings",value:function(){var e=this,t=document.createElement("script");t.onerror=function(){e.complete("Settings Error")};var r=e.clientName+"/queue-fair-settings.js";if(!e.isLocal){var i=!1,n=e.scriptSrc;if(null!=n){var a=n.indexOf("://");if(-1!=a){a+=3;var o=n.indexOf("/",a);-1!=o&&(r=e.protocol+"://"+n.substring(a,o)+"/"+r,i=!0)}}i||(r=e.protocol+"://files.queue-fair.net/"+r)}t.src=r,document.getElementsByTagName("head")[0].appendChild(t)}},{key:"checkQueryString",value:function(){var e=this,t=""+window.location.search;if(-1!=t.indexOf("qfqid=")&&-1!=(a=t.indexOf("qfq=")))for(var r=t.indexOf("&",a),i=t.substring(a+4,r),n=e.settings.queues,a=0;a<n.length;a++){var o=n[a];if(o.name==i){e.l("Found queue for querystring "+i);var u=""+t;u=u.substring(u.indexOf("qfqid")),e.setCookie(i,u,60*o.passedLifetimeMinutes,o.cookieDomain),e.l("Marking "+i+" as passed by queryString"),e.passed[i]=!0;var s=""+document.location,l=null;-1!=(r=s.lastIndexOf("#"))&&(l=s.substring(r)),s=s.substring(0,s.indexOf("qfqid=")-1),null!=l&&(s+=l),setTimeout((function(){window.history.replaceState({},document.title,s)}),300)}}}},{key:"onLocChange",value:function(){var e=this;try{e.reset(),e.parseSettings()}catch(t){e.l("QF Error on Loc Change"),e.l(t),e.e(t)}}},{key:"setDebug",value:function(e){if(e&&"false"!=e){var t=this;t.debug=!0,t.rdebug="remote"==e,t.rdebug&&(t.errMode="POST")}}},{key:"locWatch",value:function(){var e=document.querySelector("body");new MutationObserver((function(e){e.forEach((function(e){queueFair.oldHref!=document.location.href&&(queueFair.oldHref=document.location.href,queueFair.l("Location changed to "+queueFair.oldHref),queueFair.onLocChange())}))})).observe(e,{childList:!0,subtree:!0})}},{key:"e",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;try{if(t&&console.log(e),r.reported>5)return;r.reported++;var i={name:e.name,message:e.message,url:document.location.href,stack:e.stack},n=document.createElement("script"),a={};a.v=r.v,a.err=e,a.errorData=i,a.parsing=r.parsing,a.protocol=r.protocol,a.redirectLoc=r.redirectLoc,a.adapterResult=r.adapterResult,a.adapterQueue=r.adapterQueue,a.hasSettings=null!==r.settings,a.clientName=r.clientName,a.ln=r.ln;var o=r.protocol+"://quality.queue-fair.net/onerror";if("POST"!=r.errMode){var u=o+"?err="+encodeURIComponent(JSON.stringify(a));return n.src=u,void document.getElementsByTagName("head")[0].appendChild(n)}var s=new XMLHttpRequest;s.open("POST",o,!0),s.send(JSON.stringify(a))}catch(e){console.log("Error in handler"),console.log(e)}}},{key:"process",value:function(){var e=this;if(e.extractClientNameFromDataLayer(),!e.clientName)try{e.extractClientName()}catch(t){e.e(t)}e.clientName?(e.setUIDFromCookie(),e.loadSettings()):console.log("ERROR Queue-Fair couldn't find the client name. Please check the data-queue-fair-client parameter in the script tag on your page or tag manager.")}},{key:"addListeners",value:function(){var e=window,t=this;try{e.addEventListener("load",(function(){queueFair.locWatch()})),e.addEventListener("DOMContentLoaded",(function(e){try{t.mp()}catch(e){t.e(e,!1)}})),e.addEventListener("pageshow",(function(e){if(e.persisted){t.l("Rerun");try{t.reset(),t.process()}catch(e){t.e(e)}}}))}catch(e){t.e(e)}}},{key:"go",value:function(){var e=this;try{window.addEventListener("error",(function(t){var r={};for(var i in t)r[i]=t[i];var n=JSON.stringify(r,(function(e,t){return t instanceof Node?"Node":t instanceof Window?"Window":t}));-1===n.indexOf("adapterjs")?-1!==n.indexOf("queue-fair-settings")&&e.complete("Settings Remote Error: "+n):e.complete("Adapter Remote Error: "+n)}))}catch(t){e.e(t)}if(e.started)console.log("WARNING: Attempt to run Queue-Fair Adapter a second time.  Returning.");else try{-1!=(""+window.location).indexOf("QFDEBUG")&&(e.debug=!0),e.addListeners(),e.process()}catch(t){console.log("QF Error "+t.message),e.e(t)}}}])}()}var queueFair;void 0===window.QueueFair&&(defineQueueFair(),window.queueFair=queueFair=new QueueFair,"undefined"!=typeof qfNoAutoGo&&qfNoAutoGo||queueFair.go());
